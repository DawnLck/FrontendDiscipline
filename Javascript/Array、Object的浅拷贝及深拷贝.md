# JS åŸºç¡€æ•°æ®ç±»åž‹å’Œæ·±æµ…æ‹·è´

é¦–å…ˆè¿˜æ˜¯å¾—å›žåˆ° Javascript çš„åŸºæœ¬æ•°æ®ç±»åž‹æ¥è¯´æ·±æµ…æ‹·è´è¿™ä»¶äº‹æƒ…ã€‚

## å€¼ç±»åž‹`[æ·±æ‹·è´]`ï¼šæ•°å€¼ Numã€å¸ƒå°”å€¼ Booleanã€å­—ç¬¦ä¸² Stringã€nullã€undefinedã€‚

åŸºæœ¬ç±»åž‹å€¼æ˜¯æŒ‡åœ¨æ ˆå†…å­˜ä¿å­˜çš„ç®€å•æ•°æ®æ®µï¼Œåœ¨å¤åˆ¶åŸºæœ¬ç±»åž‹å€¼çš„æ—¶å€™ï¼Œä¼šå¼€è¾Ÿå‡ºä¸€ä¸ªæ–°çš„å†…å­˜ç©ºé—´ï¼Œå°†å€¼å¤åˆ¶åˆ°æ–°çš„å†…å­˜ç©ºé—´ï¼Œä¸¾ä¸ªæ —å­ ðŸŒ°ï¼š

```js
    var a = 1;
    var b = a;
    a = 2ï¼›
    console.log(a);//è¾“å‡º2ï¼›
    console.log(b);//è¾“å‡º1ï¼›
```

## å¼•ç”¨ç±»åž‹`[æµ…æ‹·è´]`ï¼šå¯¹è±¡ã€æ•°ç»„ã€å‡½æ•°ç­‰ã€‚

ç”¨ç±»åž‹å€¼æ˜¯ä¿å­˜åœ¨å †å†…å­˜ä¸­çš„å¯¹è±¡ï¼Œå˜é‡ä¿å­˜çš„åªæ˜¯æŒ‡å‘è¯¥å†…å­˜çš„åœ°å€ï¼Œåœ¨å¤åˆ¶å¼•ç”¨ç±»åž‹å€¼çš„æ—¶å€™ï¼Œå…¶å®žåªå¤åˆ¶äº†æŒ‡å‘è¯¥å†…å­˜çš„åœ°å€ï¼Œä¸¾ä¸ªæ —å­ ðŸŒ°ï¼š

```js
var a = { b: 1 };
var a2 = a;
a2.b = 2;
console.log(a); // è¾“å‡º {b: 2}
```

# å®žçŽ°å¯¹è±¡æ·±æ‹·è´çš„å‡ ç§æ–¹æ³•

æ•°ç»„ä¹Ÿæ˜¯ä¸€ç§å¯¹è±¡ï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆä»Žæœ€æ ¸å¿ƒçš„å¯¹è±¡çš„æ·±æ‹·è´è®²èµ·ã€‚

1. `JSON.parse()` && `JSON.stringfy()`
   å°†è¯¥å¯¹è±¡è½¬æ¢ä¸ºå…¶ JSON å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼ï¼Œç„¶åŽå°†å…¶è§£æžå›žå¯¹è±¡ã€‚è¿™æ„Ÿè§‰æœ‰ç‚¹å¤ªè¿‡ç®€å•äº†ï¼Œä½†å®ƒç¡®å®žæœ‰æ•ˆï¼š
   ```js
   const obj = /* ... */;
   const copy = JSON.parse(JSON.stringify(obj));
   ```
   ä¼˜ç‚¹æ˜¯ï¼Œå¦‚æžœæ²¡æœ‰å¾ªçŽ¯å¯¹è±¡ï¼Œå¹¶ä¸”ä¸éœ€è¦ä¿ç•™å†…ç½®ç±»åž‹ï¼Œä½¿ç”¨è¯¥æ–¹æ³•çš†å¯ä»¥èŽ·å¾—æœ€å¿«çš„è·¨æµè§ˆå™¨çš„å…‹éš†æ€§èƒ½ã€‚
   è¿™é‡Œçš„ç¼ºç‚¹æ˜¯åˆ›å»ºäº†ä¸€ä¸ªä¸´æ—¶çš„ï¼Œå¯èƒ½å¾ˆå¤§çš„å­—ç¬¦ä¸²ï¼Œåªæ˜¯ä¸ºäº†æŠŠå®ƒé‡æ–°æ”¾å›žè§£æžå™¨ã€‚
   å¦ä¸€ä¸ªç¼ºç‚¹æ˜¯è¿™ç§æ–¹æ³•ä¸èƒ½å¤„ç†å¾ªçŽ¯å¯¹è±¡ï¼Œè€Œä¸”å¾ªçŽ¯å¯¹è±¡ç»å¸¸å‘ç”Ÿã€‚
   ä¾‹å¦‚ï¼Œå½“æˆ‘ä»¬æž„å»ºæ ‘çŠ¶æ•°æ®ç»“æž„ï¼Œå…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹å¼•ç”¨å…¶çˆ¶çº§ï¼Œè€Œçˆ¶çº§åˆå¼•ç”¨å…¶å­çº§ã€‚
   ```js
   const x = {};
   const y = { x };
   x.y = y; // Cycle: x.y.x.y.x.y.x.y.x...
   const copy = JSON.parse(JSON.stringify(x)); // throws!
   ```
   å¦å¤–ï¼Œè¯¸å¦‚ `Map`, `Set`, `RegExp`, `Date`, `ArrayBuffer` å’Œå…¶ä»–å†…ç½®ç±»åž‹åœ¨è¿›è¡Œåºåˆ—åŒ–æ—¶ä¼šä¸¢å¤±ã€‚
2. `MessageChannel` && `postMessage` ç»“æž„åŒ–å…‹éš†ç®—æ³•
   è¿™ç§æ–¹æ³•çš„ç¼ºç‚¹æ˜¯å®ƒæ˜¯å¼‚æ­¥çš„ã€‚è™½ç„¶è¿™å¹¶æ— å¤§ç¢ï¼Œä½†æ˜¯æœ‰æ—¶å€™ä½ éœ€è¦ä½¿ç”¨åŒæ­¥çš„æ–¹å¼æ¥æ·±åº¦æ‹·è´ä¸€ä¸ªå¯¹è±¡ã€‚

   ```js
   function structuralClone(obj) {
     return new Promise(resolve => {
       const {port1, port2} = new MessageChannel();
       port2.onmessage = ev => resolve(ev.data);
       port1.postMessage(obj);
     });
   }

   const obj = /* ... */;
   const clone = await structuralClone(obj);
   ```

# æ•°ç»„çš„æ·±æ‹·è´ä»¥åŠ`Array.slice()`å’Œ`Array.concat()`æ–¹æ³•å±žäºŽæ·±æ‹·è´å—ï¼Ÿ

è¿™ä¸ªæˆ‘éƒ½è¢«å¼„ç³Šæ¶‚äº†ï¼Œç½‘ä¸Šæ‰¾äº†äº›èµ„æ–™æ‰æ‹æ¸…äº†ä¸€ä¸‹ã€‚

**å¯¹äºŽä¸€ç»´æ•°ç»„è€Œè¨€**ï¼š

1. **arrayObj.slice(start, end)**
   ```js
   var arr1 = ["1", "2", "3"];
   var arr2 = arr1.slice(0);
   arr2[1] = "9";
   console.log("æ•°ç»„çš„åŽŸå§‹å€¼ï¼š" + arr1); //1,2,3
   console.log("æ•°ç»„çš„æ–°å€¼ï¼š" + arr2); //1,9,3
   ```
2. **arrayObj.concat(arr1,arr2 ... )**
   ```js
   var arr1 = ["1", "2", "3"];
   var arr2 = arr1.concat();
   arr2[1] = "9";
   console.log("æ•°ç»„çš„åŽŸå§‹å€¼ï¼š" + arr1); //1,2,3 console.log("æ•°ç»„çš„æ–°å€¼ï¼š" + arr2 );//1,9,3
   ```

**é‚£æ•°ç»„é‡Œé¢å¦‚æžœåŒ…å«å¯¹è±¡å‘¢ï¼Ÿ**ï¼š

```js
var arr1 = [{ name: "weifeng" }, { name: "boy" }]; //åŽŸæ•°ç»„
var arr2 = [].concat(arr1); //æ‹·è´æ•°ç»„
arr1[1].name = "girl";
console.log(arr1); // [{"name":"weifeng"},{"name":"girl"}]
console.log(arr2); //[{"name":"weifeng"},{"name":"girl"}]

var a1 = [["1", "2", "3"], "2", "3"],
  a2;
a2 = a1.slice(0);
a1[0][0] = 0; //æ”¹å˜a1ç¬¬ä¸€ä¸ªå…ƒç´ ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ 
console.log(a2[0][0]); //å½±å“åˆ°äº†a2
```

ä»Žä¸Šé¢ä¸¤ä¸ªä¾‹å­å¯ä»¥çœ‹å‡ºï¼Œç”±äºŽæ•°ç»„å†…éƒ¨å±žæ€§å€¼ä¸ºå¼•ç”¨å¯¹è±¡ï¼Œå› æ­¤ä½¿ç”¨ `slice` å’Œ `concat` å¯¹å¯¹è±¡æ•°ç»„çš„æ‹·è´ï¼Œæ•´ä¸ªæ‹·è´è¿˜æ˜¯æµ…æ‹·è´ï¼Œæ‹·è´ä¹‹åŽæ•°ç»„å„ä¸ªå€¼çš„æŒ‡é’ˆè¿˜æ˜¯æŒ‡å‘ç›¸åŒçš„å­˜å‚¨åœ°å€ã€‚

> **`Array.slice()`** å’Œ **`Array.concat()`** è¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œä»…é€‚ç”¨äºŽå¯¹ä¸åŒ…å«å¼•ç”¨å¯¹è±¡çš„ä¸€ç»´æ•°ç»„çš„æ·±æ‹·è´!

è¿™é‡Œè¿˜æœ‰ä¸ªé—®é¢˜ç•™ç»™æˆ‘ä»¬æ€è€ƒä¸€ä¸‹ ðŸ¤”ï¼Œå¦‚æžœäºŒç»´æ•°ç»„ä¸­ï¼Œæˆ‘ä»¬ç›´æŽ¥å¯¹ç¬¬ä¸€ä¸ªç»´åº¦è¿›è¡Œä¿®æ”¹å‘¢ï¼Ÿå³`a1[0] = 1`ï¼Œè¿™ä¸ªä¿®æ”¹ä¼šä¸ä¼šå½±å“ `a2`?

# ES6 ä¸­çš„ `Object.assign()` æ–¹æ³• ä»¥åŠ å¯¹è±¡æ‰©å±•æ“ä½œç¬¦ `...`

## Object.assign() æ–¹æ³•

Object.assign()è€ƒå¯Ÿç‚¹æ˜¯ ES6 ä¸­å®žçŽ°å¯¹è±¡å¤åˆ¶ï¼Œå…³äºŽ Object.assign()è¿™ä¸ªå‡½æ•°[è¿™é‡Œæœ‰ä¸€ç¯‡æ–‡ç« ][1]è®²å¾—éžå¸¸è¯¦ç»†æ˜Žç™½ã€‚

ES6 æä¾›äº† Object.assign()ï¼Œç”¨äºŽåˆå¹¶/å¤åˆ¶å¯¹è±¡çš„å±žæ€§ã€‚

```js
Object.assign(target, source_1, ..., source_n)
```

ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­

```js
var o1 = { a: 1, b: 1, c: 1 };
var o2 = { b: 2, c: 2 };
var o3 = { c: 3 };

var obj = Object.assign({}, o1, o2, o3);
console.log(obj); // { a: 1, b: 2, c: 3 }
```

é‚£ä¹ˆ Object.assign()æ–¹æ³•æ˜¯æµ…æ‹·è´è¿˜æ˜¯æ·±æ‹·è´å‘¢ï¼Ÿè¯·çœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š

```js
function mutateDeepObject(obj) {
  obj.a.thing = true;
}

const obj = { a: { thing: false } };
const copy = Object.assign({}, obj);
mutateDeepObject(copy);
console.log(obj.a.thing); // prints true
```

> `Object.assign(target, sources...)`æ˜¯ä¸€ä¸ªç®€å•çš„æ‹·è´å¯¹è±¡çš„æ–¹å¼ï¼Œå±žäºŽæµ…æ‹·è´ã€‚å®ƒæŽ¥å—ä»»æ„æ•°é‡çš„æºå¯¹è±¡ï¼Œä¸»è¦ä½œç”¨å°±æ˜¯æžšä¸¾å®ƒä»¬çš„æ‰€æœ‰å±žæ€§å¹¶åˆ†é…ç»™`target`ã€‚

## å¯¹è±¡æ‰©å±•æ“ä½œç¬¦ `...`

> ä½¿ç”¨å¯¹è±¡æ‰©å±•æ“ä½œç¬¦ ...ï¼Œå¯¹è±¡è‡ªå·±çš„å¯æžšä¸¾å±žæ€§å¯ä»¥è¢«æ‹·è´åˆ°æ–°å¯¹è±¡ã€‚

```js
const obj = { a: 1, b: 2, c: { d: "d" } };
const shallowClone = { ...obj };
shallowClone.a = "a";
shallowClone.c.d = "4";
console.log(obj); // a: 1, b: 2, c: {d: "4"}}
console.log(shallowClone); // a: "a", b: 2, c: {d: "4"}}
```

# å…¶ä»–çš„çœ‹ä¸ŠåŽ»åƒæ˜¯å¯¹è±¡æ·±æ‹·è´ï¼Œå®žè´¨æ˜¯æµ…æ‹·è´çš„æ–¹æ³•

````js
const obj = { a: 1, b: 2, c:{d:'d'} }
const shallowClone = Object.keys(obj).reduce((acc, key) => (acc[key] = obj[key], acc), {});
shallowClone.a = 'a';
shallowClone.c.d = '4';
console.log(obj); // a: 1, b: 2, c: {d: "4"}}
console.log(shallowClone); // a: "a", b: 2, c: {d: "4"}}
**```**
````
