# æ•°ç»„çš„æ‰å¹³åŒ–

æœ€ç®€å•çš„åº”è¯¥æ˜¯ ES6 çš„`Array.prototype.flat`ï¼Œä¸€è¡Œä»£ç å°±èƒ½å®ç°æ•°ç»„æ‰å¹³åŒ–çš„åŠŸèƒ½ï¼Œä½†æ˜¯é¢è¯•ä¸€èˆ¬ä¼šè®©æˆ‘ä»¬å®ç° polyfillï¼Œå…·ä½“æ€ä¹ˆåšå¯ä»¥å‚è€ƒä¸‹é¢çš„å‡ ç§æ–¹æ¡ˆï¼š

## `reduce`å’Œ`concat`ç»“åˆä½¿ç”¨

```js
function flatArray(array) {
  let result = array.reduce((prev, curr) => {
    return Array.prototype.concat(
      prev,
      Array.isArray(curr) ? flatArray(curr) : curr
    );
  }, []);
  return result;
}
```

è¿™ä¸ªæ–¹æ¡ˆå®ç°çš„æ•ˆæœç›¸å½“ç²¾ç®€ï¼Œç»“åˆäº† Array çš„ ES6 æ–¹æ³•ï¼ŒåŒæ—¶ä¹Ÿä½¿ç”¨äº†é€’å½’ã€‚å› ä¸ºæ­£å¸¸äººå¦‚æœä¸ç†Ÿæ‚‰è¿™æ®µä»£ç ï¼Œä¹ä¸€çœ‹éƒ½ä¼šæœ‰ç‚¹æ‡µï¼Œæ‰€ä»¥ç”šè‡³å¯ä»¥æŠŠé¢è¯•å®˜ä¹Ÿå¸¦è¿›å»æ€è€ƒï¼Œæ˜¯ä¸æ˜¯å¾ˆæœ‰é€¼æ ¼ ğŸ˜†ï¼Ÿ

# å¯¹è±¡çš„æ‰å¹³åŒ–

å¯¹è±¡çš„æ‰å¹³åŒ–ä¸»è¦çš„ä¸åŒå°±åœ¨å¯¹è·¯å¾„çš„é€’å½’ï¼ŒåŒæ—¶ä¹Ÿè¦æ³¨æ„å¦‚ä½•æ°å½“çš„åˆ¤æ–­å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡è€Œä¸æ˜¯æ•°ç»„ã€‚

```js
function flatternObj(obj) {
  let result = {};
  function flat(obj, prefix = "") {
    for (let index in obj) {
      let target = obj[index];
      let _path = prefix.length ? `${prefix}.${index}` : `${index}`;
      if (Object.prototype.toString.call(target) == "[object Object]") {
        flat(target, _path);
      } else {
        result[_path] = target;
      }
    }
  }
  flat(obj);
  return result;
}
```
