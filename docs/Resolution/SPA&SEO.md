éšç€ä¸‰å¤§å‰ç«¯æ¡†æ¶çš„æ™®åŠï¼ŒSPAï¼ˆSingle-Page Applicationï¼‰ å‹é¡µé¢æˆ–è€…å·¥ç¨‹æ—¥æ¸æ˜¾éœ²å‡ºå®ƒæ— å¯æ¯”æ‹Ÿçš„ä¼˜åŠ¿ï¼Œåœ¨ web ç«¯å æ®çš„æ¯”é‡è¶Šæ¥è¶Šå¤§ï¼Œæ·±å—å¼€å‘è€…å’Œè®¾è®¡å¸ˆçš„å–œçˆ±ã€‚

ä½†æ˜¯ï¼ŒSPA å‹ç½‘ç«™æœ‰ä¸€ä¸ªè‡´å‘½çš„ç‚¹ï¼ŒSEOï¼ˆSearch Engine Optimizationï¼‰ã€‚è¿™æ˜¯å› ä¸º SPA å‹é¡µé¢å¹¶ä¸é€‚åˆçˆ¬è™«ç›´æ¥å»è®¿é—®ï¼Œä¸€ä¸ªç½‘ç«™å¦‚æœä¸èƒ½å‡ºç°åœ¨å…³é”®è¯æœç´¢çš„å‰å‡ é¡µåˆ—è¡¨é‡Œï¼Œè¿™ä¸ªç½‘ç«™å°†åœ¨è¿™ä¸ªä¸‡ç»´ç½‘ä¸Šæ¥è¿‘éšèº«ã€‚

æ€ä¹ˆæ ·æ‰èƒ½å®Œå–„ SPA å‹ç½‘ç«™çš„ SEO å‘¢ï¼Ÿä¸”çœ‹ä¸‹æ–‡ ğŸ‰

# ä¸»æµæœç´¢å¼•æ“çˆ¬è™« UA

## ç™¾åº¦ Baidu

[ç™¾åº¦æœç´¢èµ„æºå¹³å°][1] https://ziyuan.baidu.com/?castk=LTE%3D

[é“¾æ¥æäº¤åœ°å€][2] https://ziyuan.baidu.com/linksubmit/url

**ç™¾åº¦çˆ¬è™« UA**

> - Mozilla/5.0 (Linux;u;Android 4.2.2;zh-cn;) AppleWebKit/534.46 (KHTML,like Gecko) Version/5.1 Mobile Safari/10600.6.3 (compatible; Baiduspider/2.0; +http://www.baidu.com/search/spider.html)

> - Mozilla/5.0 (compatible; Baiduspider/2.0; +http://www.baidu.com/search/spider.htmlï¼‰

## è°·æ­Œ Google

[Google Search Console][3] https://search.google.com/search-console

**è°·æ­Œçˆ¬è™« UA**

> - Mozilla/5.0 (Linux; Android 6.0.1; Nexus 5X Build/MMB29P) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2272.96 Mobile Safari/537.36 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)

# ç½‘é¡µ SEO ä¼˜åŒ–å¸¸è§„ç­–ç•¥

## å½±å“ SEO æ’åçš„å‡ ä¸ªå› ç´ 

ç½‘é¡µæœç´¢å¼•æ“é€šå¸¸æ›´å…³æ³¨ç½‘ç«™çš„ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š

1.  å¯è¯»æ€§ ğŸ“°

    ä¿¡æ¯æ¶æ„éœ€è¦æ¸…æ¥šæ˜æ™°ï¼Œç½‘ç«™éœ€è¦å°½å¯èƒ½åœ°æä¾›æ— éšœç¢é˜…è¯»ï¼Œå‹å¥½çš„ URL è®¾è®¡ï¼Œæ˜ç¡®çš„æ ‡é¢˜å†…å®¹ï¼Œé¡µé¢ç›¸å…³åº¦ä¿¡æ¯èšåˆå’Œèåˆã€‚

    ä¸ºç½‘ç«™ç¡®å®šä¸€ä¸ªä¸»é¢˜ï¼ˆæ ¸å¿ƒå…³é”®è¯ï¼‰ï¼Œå…¨ç«™éƒ½å›´ç»•è¿™ä¸ªå…³é”®è¯è¿›è¡Œæ‰©å±•å’Œç›¸å…³æ€§æ¥åšï¼Œå°½å¯èƒ½å¤šåœ°åœ¨ç½‘é¡µä¸­å¸¦å…¥æˆ‘ä»¬å®šä¹‰çš„å…³é”®è¯ã€‚

2.  å®‰å…¨æ€§ ğŸ”’

    ç½‘ç«™çš„åè®®æ˜¯å¦é‡‡ç”¨äº†æ›´å®‰å…¨çš„ HTTPSï¼Œä¹Ÿæ˜¯æœç´¢å¼•æ“ä¼šè€ƒé‡ç½‘ç«™æƒé‡çš„éƒ¨åˆ†ã€‚

3.  ç§»åŠ¨ä¼˜åŒ– ğŸ“±

    Google åœ¨ 2019 å¹´å¼€å§‹ï¼Œé‡‡ç”¨äº†ç§»åŠ¨ä¼˜å…ˆçš„æœç´¢ç´¢å¼•ï¼Œæ‰€ä»¥å¯¹ç§»åŠ¨ç«¯çš„ä¼˜åŒ–ï¼Œä¹Ÿæ˜¯ç‰¹åˆ«éœ€è¦å…³æ³¨çš„ä¸€ä¸ªç‚¹ã€‚

4.  æ€§èƒ½å’Œç”¨æˆ·å‚ä¸åº¦ ğŸš€

    çˆ¬è™«æ˜¯ä¸è€çƒ¦çš„ï¼Œå¯¹äºåŠ è½½èŠ±è´¹äº†å¤ªå¤šæ—¶é—´çš„é¡µé¢ï¼Œå®ƒä»¬ä¼šç»™äºˆè¾ƒä½çš„æœç´¢æƒé‡ï¼Œæ‰€ä»¥å¯¹é¡µé¢æ¸²æŸ“çš„æ€§èƒ½ä¼˜åŒ–ï¼Œä¸ä»…ä»…æ˜¯å¯¹ç”¨æˆ·çš„è´Ÿè´£ï¼Œå¯¹ SEO ä¹Ÿæœ‰å¥½å¤„ã€‚

    å¯¹äºé‚£äº›å¼•å…¥äº†ç™¾åº¦ç»Ÿè®¡æˆ–è€…è°·æ­Œç»Ÿè®¡æ’ä»¶çš„ç½‘é¡µï¼Œç»Ÿè®¡è„šæœ¬ä¼šåœ¨åå°è®°å½•ç”¨æˆ·çš„å‚ä¸åº¦ï¼ˆå¦‚é¡µé¢åœç•™æ—¶é•¿ï¼‰ï¼Œçº³å…¥åˆ° SEO æƒé‡è®¡ç®—ä¸­ã€‚

5.  æƒå¨æ€§å’Œä¿¡ä»»åº¦ ğŸ¥‚

    ç½‘ç«™å¤–é“¾å°±æ˜¯åœ¨åˆ«çš„ç½‘ç«™å¯¼å…¥è‡ªå·±ç½‘ç«™çš„é“¾æ¥ï¼Œé«˜è´¨é‡é«˜ PR çš„å¤–é“¾èƒ½è¿…é€Ÿæé«˜è‡ªèº«ç½‘ç«™çš„æƒé‡ã€‚

    å‹é“¾åˆ™æ˜¯è‡ªå·±çš„ç½‘ç«™åŒ…å«äº†å…¶ä»–ç½‘ç«™çš„é“¾æ¥ï¼Œæ•ˆæœä¸å¤–é“¾ç±»ä¼¼ã€‚

> å¦‚æœä½ å¯¹è‡ªå·±çš„ç½‘ç«™ä¼˜åŒ–è¿˜æ²¡æœ‰å…·ä½“çš„æƒ³æ³•ï¼Œå¯ä»¥ç”¨ lighthouse å¯¹ç½‘é¡µè¿›è¡Œè¯„ä¼°ï¼ŒæŒ‰ç…§ç»™å‡ºçš„å»ºè®®è¿›è¡Œä¼˜åŒ–ã€‚

1. ç½‘ç«™ä¸»é¢˜

2. å¤–é“¾å’Œå‹é“¾æƒé‡

## å¦‚ä½•åˆ©ç”¨å¥½ Meta Tag å…ƒæ ‡è®°

Meta æ ‡ç­¾ç”¨äºç»™æœç´¢å¼•æ“æä¾›å…³äºç½‘é¡µçš„ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯å¯¹äºè®¿é—®è€…è€Œè¨€æ˜¯ä¸å¯è§çš„ã€‚

1.  Title
    title ç½‘ç«™æ ‡é¢˜ï¼Œé•¿åº¦åº”å½“å°äº 70 å­—ï¼Œå»ºè®®å½¢å¼ä¸ºâ€œ<æ ‡é¢˜>-<å…¶ä»–å†…å®¹>-<ç½‘ç«™å>â€
2.  Meta - Description
    description ç»™æœç´¢å¼•æ“æä¾›äº†å…³äºè¿™ä¸ªç½‘é¡µçš„ç®€çŸ­çš„æè¿°ï¼Œé•¿åº¦åº”å½“å°äº 140 å­—
3.  Meta - Keywords
    keywords å…³äºç½‘é¡µå†…å®¹çš„å‡ ä¸ªå…³é”®è¯
4.  Meta - Robots
    robots ç®¡ç†ç€æœç´¢å¼•æ“æ˜¯å¦å¯ä»¥è¿›å…¥ç½‘é¡µ

å¦‚ä¸‹é¢ä¸€æ®µä»£ç ï¼Œç¦æ­¢æœç´¢å¼•æ“è·å–ç½‘é¡µï¼Œå¹¶ä¸”é˜»æ­¢å…¶è¿›å…¥é“¾æ¥ã€‚

```html
<meta name="â€robotsâ€" content="â€noindex," nofollowâ€ />
```

æ­¤å¤„æˆ‘ä»¬ä¸¾ä¸ªæ —å­ ğŸŒ°

```html
<header>
  <title>æ·˜å®ç½‘ - æ·˜ï¼æˆ‘å–œæ¬¢</title>
  <meta
    name="description"
    content="æ·˜å®ç½‘ - äºšæ´²è¾ƒå¤§çš„ç½‘ä¸Šäº¤æ˜“å¹³å°ï¼Œæä¾›å„ç±»æœé¥°ã€ç¾å®¹ã€å®¶å±…ã€æ•°ç ã€è¯è´¹/ç‚¹å¡å……å€¼â€¦ æ•°äº¿ä¼˜è´¨å•†å“ï¼ŒåŒæ—¶æä¾›æ‹…ä¿äº¤æ˜“(å…ˆæ”¶è´§åä»˜æ¬¾)ç­‰å®‰å…¨äº¤æ˜“ä¿éšœæœåŠ¡ï¼Œå¹¶ç”±å•†å®¶æä¾›é€€è´§æ‰¿è¯ºã€ç ´æŸè¡¥å¯„ç­‰æ¶ˆè´¹è€…ä¿éšœæœåŠ¡ï¼Œè®©ä½ å®‰å¿ƒäº«å—ç½‘ä¸Šè´­ç‰©ä¹è¶£ï¼"
  />
  <meta
    name="keyword"
    content="æ·˜å®,æå®,ç½‘ä¸Šè´­ç‰©,C2C,åœ¨çº¿äº¤æ˜“,äº¤æ˜“å¸‚åœº,ç½‘ä¸Šäº¤æ˜“,äº¤æ˜“å¸‚åœº,ç½‘ä¸Šä¹°,ç½‘ä¸Šå–,è´­ç‰©ç½‘ç«™,å›¢è´­,ç½‘ä¸Šè´¸æ˜“,å®‰å…¨è´­ç‰©,ç”µå­å•†åŠ¡,æ”¾å¿ƒä¹°,ä¾›åº”,ä¹°å–ä¿¡æ¯,ç½‘åº—,ä¸€å£ä»·,æ‹å–,ç½‘ä¸Šå¼€åº—,ç½‘ç»œè´­ç‰©,æ‰“æŠ˜,å…è´¹å¼€åº—,ç½‘è´­,é¢‘é“,åº—é“º"
  />
  ...
</header>
```

# SPA ç½‘ç«™ SEO ä¼˜åŒ–æŒ‡å—

åœ¨å®¢æˆ·ç«¯æ¸²æŸ“çš„ SPA é¡µé¢ä¸­ï¼Œç”±äºå†…å®¹éƒ½æ˜¯ç”± Javascript ç¼–è¯‘åäº§ç”Ÿæ·»åŠ åˆ°æ¸²æŸ“æ ‘ï¼ˆRender Treeï¼‰ä¸Šçš„ï¼Œæ‰€ä»¥ä½ æŸ¥çœ‹é¡µé¢æºï¼Œå¤§æ¦‚ç‡ä¼šå¾—åˆ°ä»¥ä¸‹è¿™ç§**ç©ºå®¹å™¨**ä»£ç ï¼š

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="manifest" href="/emoji-search/manifest.json" />
    <link rel="shortcut icon" href="/emoji-search/favicon.ico" />
    <title>Emoji Search</title>
    <link href="/emoji-search/static/css/main.2e862781.css" rel="stylesheet" />
  </head>

  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
    <a
      class="github-fork-ribbon"
      href="https://github.com/ahfarmer/emoji-search"
      title="Fork me on GitHub"
      >Fork me on GitHub</a
    >
    <script
      type="text/javascript"
      src="/emoji-search/static/js/main.d4350923.js"
    ></script>
  </body>
</html>
```

## ï¼ˆä¸€ï¼‰ ä¸‰ç§è§£å†³æ–¹æ¡ˆï¼š

1. æœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„ SSR(Server Side Render)ï¼Œå®ç°èµ·æ¥è¾ƒä¸ºå¤æ‚ã€‚

2. é¡µé¢ç¼“å­˜æœåŠ¡ï¼Œprerender.ioï¼Œæ¶‰åŠæ”¶è´¹ç¬¬ä¸‰æ–¹æœåŠ¡ï¼Œæˆ–è€…ä¸­é—´å±‚å¯ç”¨æ¸²æŸ“ã€‚

3. é¢„æ¸²æŸ“æŠ€æœ¯ï¼Œä¹Ÿå¯ä»¥ç§°ä¸ºé™æ€é¡µæ›¿æ¢ï¼Œ**phantom.js**ã€**puppeteer** æˆ–è€…æµè§ˆå™¨ Copy outerHTML å°±èƒ½å®Œæˆï¼Œéœ€è¦ **nginx** é…åˆã€‚

è¯¥ç¯‡æ–‡ç« åç»­ä¼šè¯¦ç»†ä»‹ç»**é¢„æ¸²æŸ“æŠ€æœ¯**çš„ä¸€äº›å®ç°æ–¹æ³•ï¼š

## ï¼ˆäºŒï¼‰å¦‚ä½•åˆ¤æ–­æ˜¯çˆ¬è™«è®¿é—®è¿˜æ˜¯æµè§ˆå™¨è®¿é—®

çˆ¬è™«è®¿é—®æ—¶ï¼Œä¼šä½¿ç”¨ç‰¹æ®Šçš„ user agentï¼Œä»¥ç™¾åº¦èœ˜è››çš„ UA ä¸ºä¾‹ï¼Œå®ƒä¼šä½¿ç”¨â€œMozilla/5.0 (compatible; Baiduspider/2.0; +http://www.baidu.com/search/s...ï¼‰â€è¿™æ ·çš„UAï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åˆ¤æ–­ UA ä¸­å«æœ‰â€œBaiduspiderâ€å­—æ ·åˆ™æ„å‘³ç€æ˜¯ç™¾åº¦èœ˜è››æ¥è®¿é—®äº†

## ï¼ˆä¸‰ï¼‰å¦‚ä½•åœ¨ç™¾åº¦çˆ¬è™«æ¥è®¿é—®æ—¶è¿”å›é™æ€é¡µ

å…ˆæŠŠé™æ€é¡µæ”¾ç½®åˆ°ç½‘ç«™çš„ `/assets/static/` ä¸‹ï¼Œé…ç½® nginx çš„é…ç½®æ–‡ä»¶ nginx.conf:

```bash
    location / {
        root   C:\projects\bzbclub-dist;
        index  index.html index.htm;

        if ( $http_user_agent ~*  "Baiduspider"){
            rewrite ^/index.html$ /assets/static/index.html last;
        }
    }
```

ä¿å­˜é…ç½®æ–‡ä»¶åè¦ä½¿ç”¨ `nginx -s reload` é‡æ–°åŠ è½½ç½‘ç«™ï¼Œç„¶åä½¿ç”¨ `curl` å‘½ä»¤çš„â€œ-Aâ€å‚æ•°æ¨¡æ‹Ÿç™¾åº¦èœ˜è››è®¿é—®é¦–é¡µï¼š

```bash
curl -A "Mozilla/5.0 (compatible; Baiduspider/2.0; +http://www.baidu.com/search/spider.htmlï¼‰" http://localhost:17082 > z:\temp\bzbclub.html
```

æ‰“å¼€ `z:\temp\bzbclub.html` ç¡®è®¤æ˜¯å¦å·²ç»è¿”å›äº†é™æ€é¡µçš„å†…å®¹ã€‚

## ï¼ˆå››ï¼‰å¦‚ä½•ç”Ÿæˆé™æ€é¡µå¹¶ä¼˜åŒ–

1. Phantom.js
   ```js
   var fs = require("fs");
   var page = require("webpage").create();
   phantom.outputEncoding = "utf-8"; //æŒ‡å®šç¼–ç æ–¹å¼
   page.open("http://localhost:17082", function (status) {
     if (status === "success") {
       fs.write("z:\\temp\\index.html", page.content, "w");
     } else {
       console.log("ç½‘é¡µåŠ è½½å¤±è´¥");
     }
     phantom.exit(0); //é€€å‡ºç³»ç»Ÿ
   });
   ```
   å°†æ­¤è„šæœ¬ä¿å­˜ä¸º`phantom-static-page.js`ï¼Œåœ¨å‘½ä»¤è¡Œæ‰§è¡Œæ­¤è„šæœ¬ï¼š
   ```cmd
   phantomjs phantom-static-page.js
   ```
2. Puppeteer
   ```js
   const fs = require("fs");
   const puppeteer = require("puppeteer");
   (async () => {
     const browser = await puppeteer.launch({
       headless: false,
       // executablePath: "C:/Program Files (x86)/Google/Chrome"
     });
     const page = await browser.newPage();
     page.setViewport({
       width: 1920,
       height: 1800,
     });
     await page.goto("http://localhost:3333");
     await page.screenshot({ path: "example.png" });
     const content = await page.content();
     fs.writeFileSync("./index.html", content);
     // await page.close();
     // await browser.close();
   })();
   ```
   å°†æ­¤è„šæœ¬ä¿å­˜ä¸º`pupp-static-page.js`ï¼Œåœ¨å‘½ä»¤è¡Œæ‰§è¡Œæ­¤è„šæœ¬ï¼š
   ```cmd
   node pupp-static-page.js
   ```
3. ä»æµè§ˆå™¨è·å–é™æ€é¡µå†…å®¹ï¼ˆæ¨èï¼‰
   ä¸å‰ä¸¤è€…ç›¸æ¯”ï¼Œçœ‹ä¸Šå»æ²¡é‚£ä¹ˆæå®¢ï¼Œä½†æ˜¯éå¸¸çš„ç®€å•å¥½ç”¨ã€‚
   - é¦–å…ˆéœ€è¦æ–°å»ºä¸€ä¸ª`static.html`
   - ç„¶ååœ¨æµè§ˆå™¨æ‰“å¼€éœ€è¦ç”Ÿæˆé™æ€é¡µçš„é¡µé¢
   - æŒ‰ `F12` æ‰“å¼€ DevTool
   - é¼ æ ‡é€‰ä¸­`<html>`æ ‡ç­¾ï¼Œå³é”® Copy > Copy OuterHTML
   - å°†å†…å®¹ç²˜è´´è‡³`static.html`ä¿å­˜å³å¯
4. é™æ€é¡µå‹ç¼©ä¼˜åŒ–
   - ç”¨ç¼–è¾‘å™¨æ‰“å¼€`static.html`ï¼Œåˆ é™¤æ‰æ‰€æœ‰çš„<script></script>ä»¥åŠå…¶ä¸­çš„å†…å®¹
   - æµè§ˆå™¨æ‰“å¼€é™æ€é¡µï¼ŒæŒ‰ `F12` æ‰“å¼€ DevTool ç¡®ä¿æ²¡æœ‰æŠ¥é”™
   - ä½“ç§¯å¤§å°ä¼˜åŒ–çš„ç¨‹åºè§†é¡µé¢çš„å¤æ‚åº¦è€Œå®šï¼Œä¸€èˆ¬èƒ½å‹ç¼©åˆ°åŸæœ‰å¤§å°çš„ååˆ†ä¹‹ä¸€

## éªŒè¯æ•ˆæœ

åœ¨æœç´¢å¼•æ“çš„å¹³å°ä¸Šï¼Œä»¥ Google Search ä¸¾ä¾‹ï¼Œæä¾›äº†å¦‚ Google URL æ£€æŸ¥å·¥å…·ï¼Œè®©ä½ èƒ½å¤Ÿæµ‹è¯• SPA å‹é¡µé¢ SEO çš„æ•ˆæœã€‚

ä½ ä¹Ÿå¯ä»¥åœ¨ä¸‰åˆ°äº”å¤©å†…ï¼Œç›´è§‚åœ°åœ¨æœç´¢å¼•æ“çš„å…³é”®è¯ç»“æœé¡µä¸Šï¼Œçœ‹åˆ°ä½ çš„ç½‘ç«™çš„æœç´¢æ’åï¼Œæ­£åœ¨é€æ­¥æé«˜ã€‚

å¦‚æœä»¥ä¸Šè¿˜è§£å†³ä¸äº†ä½ çš„é—®é¢˜ï¼Œå¯ä»¥è”ç³»æœç´¢å¼•æ“å¹³å°ååŠ©è§£å†³ã€‚

# å‚è€ƒæ–‡ç« é“¾æ¥

1. [ã€ŠMeta æ ‡ç­¾ä¸æœç´¢å¼•æ“ä¼˜åŒ–ã€‹][4]
2. [ã€ŠSEO ç½‘ç«™ä¼˜åŒ–çš„æ­¥éª¤å’ŒæŠ€å·§æœ‰å“ªäº›ï¼Ÿã€‹][5]
3. [ã€ŠAngular2 ç½‘ç«™ SEO æ”»ç•¥ã€‹][6]
4. [ã€ŠSPA SEO: A Single-Page App Guide to Googleâ€™s 1st Pageã€‹][7]
5. [MDN - <meta>ï¼šæ–‡æ¡£çº§å…ƒæ•°æ®å…ƒç´ ][8]

[1]: https://ziyuan.baidu.com/?castk=LTE=
[2]: https://ziyuan.baidu.com/linksubmit/url
[3]: https://search.google.com/search-console
[4]: https://www.w3cplus.com/html5/meta-tags-and-seo.html
[5]: https://www.zhihu.com/question/19808905
[6]: https://segmentfault.com/a/1190000014596299?utm_source=index-hottest
[7]: https://snipcart.com/spa-seo
[8]: https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/meta
